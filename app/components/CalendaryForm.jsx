import PropTypes from 'prop-types'
import { mixin } from 'lodash-decorators'
import { merge } from 'merge-anything'

import CommonForm from 'CommonForm'
import { matchLanguages, matchAlphabeths, matchLetters, matchEmptyObject, matchCodes, matchEmptyCollection } from 'matchers'

export default class CalendaryForm extends CommonForm {
   static defaultProps = {
      id: undefined,
      licit: false,
      slug: {text: ''},
      language_code: '',
      alphabeth_code: '',
      author_name: '',
      date: '',
      council: '',
      names: [],
      descriptions: [],
      wikies: [],
      links: [],

      remoteName: 'calendary',
      remoteNames: 'calendaries',

      meta: {
         slug: {
            kind: 'block',
            meta: {
               id: {
                  kind: 'hidden',
               },
               text: {
                  kind: 'text',
                  name: 'text',
                  title: 'Жетон',
                  placeholder: 'Введи имя жетона',
                  data: {length: '6'},
                  display_scheme: '12-4-2-2',
                  validations: {
                     "Слишком большое имя жетона": /^.{7,}$/,
                     "Жетон отсутствует": matchEmptyObject,
                     "В имени жетона допустимы только русская кириллица и цифры": /[^ёа-я0-9]/
                  }
               }
            }
         },
         language_code: {
            kind: 'select',
            name: 'language_code',
            title: 'Язык',
            display_scheme: '12-8-4-4',
            codeNames: {
               '': 'Избери язык...',
               ру: 'Русский',
               цс: 'Церковнославянский',
               сс: 'Старославянский',
               ук: 'Украинский',
               бл: 'Белорусский',
               мк: 'Македонский',
               сх: 'Сербохорватский',
               со: 'Словенский',
               бг: 'Болгарский',
               чх: 'Чешский',
               сл: 'Словацкий',
               по: 'Польский',
               кш: 'Кашубский',
               вл: 'Верхнелужийкий',
               нл: 'Нижнелужицкий',
               ар: 'Армянский',
               ив: 'Грузинский',
               рм: 'Румынский',
               гр: 'Греческий',
               ла: 'Латинский',
               ит: 'Итальянский',
               фр: 'Французский',
               ис: 'Испанский',
               не: 'Немецкий',
               ир: 'Ирландский',
               си: 'Староирландский',
               ан: 'Английский',
               ев: 'Иврит',
            },
            validations: {
               'Избранный язык не соотвествует избранной азбуке': matchCodes,
               'Язык из списка должен быть выбран': matchEmptyObject,
            }
         },
         alphabeth_code: {
            kind: 'select',
            name: 'alphabeth_code',
            title: 'Азбука',
            display_scheme: '12-8-4-4',
            codeNames: {
               '': 'Избери азбуку...',
               ру: 'Пореформенная русская азбука',
               рп: 'Дореформенная русская азбука',
               цс: 'Церковнославянская кириллица',
               цр: 'Церковнославянская разметка (hip)',
               сс: 'Старославянкая кириллица',
               ук: 'Украинская азбука',
               ср: 'Сербская азбука (кириллица)',
               хр: 'Хорватская азубка (латиница)',
               со: 'Словнеская азбука',
               бг: 'Болгарская азбука',
               чх: 'Чешская азбука',
               сл: 'Словацкая азбука',
               по: 'Польская азбука',
               ар: 'Армянская азбука',
               ив: 'Грузинская азбука',
               рм: 'Румынская латиница',
               цу: 'Церковнославянская кириллица румынского извода',
               гр: 'Греческая азбука',
               ла: 'Латынь',
               ит: 'Итальянская азбука',
               фр: 'Французская азбука',
               ис: 'Испанская азбука',
               не: 'Немецкая азбука',
               ир: 'Ирландская азбука',
               си: 'Староирландская азбука',
               ан: 'Английская азбука',
               са: 'Среднеанглийская азбука',
               ра: 'Раннеанглийская азбука',
               ев: 'Еврейская азбука',
            },
            validations: {
               'Азбука из списка должен быть выбран': matchEmptyObject,
            }
         },
         licit: {
            kind: 'boolean',
            name: 'licit',
            title: 'Опубликовать',
            display_scheme: '12-4-2-2',
         },
         names: {
            kind: 'collection',
            title: "Имена",
            action: "Добавь имя",
            display_scheme: '12-12-12-12',
            validations: {
               'Минимум одно имя должно быть задано':  matchEmptyCollection,
               'Языки в именах не могут совпадать': matchLanguages,
               'Азбуки в именах не могут совпадать': matchAlphabeths,

            },
            meta: {
               id: {
                  kind: 'hidden',
               },
               text: {
                  kind: 'text',
                  title: 'Имя',
                  placeholder: 'Введи имя',
                  name: 'text',
                  display_scheme: '12-12-6-6',
                  validations: {
                     'Текст имени отсутствует': matchEmptyObject,
                     'Набранный текст содержит знаки вне перечня избранной азбуки': matchLetters,
                  }
               },
               language_code: {
                  kind: 'select',
                  name: 'language_code',
                  title: 'Язык',
                  display_scheme: '12-6-3-3',
                  codeNames: {
                     '': 'Избери язык...',
                     ру: 'Русский',
                     цс: 'Церковнославянский',
                     сс: 'Старославянский',
                     ук: 'Украинский',
                     бл: 'Белорусский',
                     мк: 'Македонский',
                     сх: 'Сербохорватский',
                     со: 'Словенский',
                     бг: 'Болгарский',
                     чх: 'Чешский',
                     сл: 'Словацкий',
                     по: 'Польский',
                     кш: 'Кашубский',
                     вл: 'Верхнелужийкий',
                     нл: 'Нижнелужицкий',
                     ар: 'Армянский',
                     ив: 'Грузинский',
                     рм: 'Румынский',
                     гр: 'Греческий',
                     ла: 'Латинский',
                     ит: 'Итальянский',
                     фр: 'Французский',
                     ис: 'Испанский',
                     не: 'Немецкий',
                     ир: 'Ирландский',
                     си: 'Староирландский',
                     ан: 'Английский',
                     ев: 'Иврит',
                  },
                  validations: {
                     'Избранный язык не соотвествует избранной азбуке': matchCodes,
                     'Язык из списка должен быть выбран': matchEmptyObject,
                  }
               },
               alphabeth_code: {
                  kind: 'select',
                  name: 'alphabeth_code',
                  title: 'Азбука',
                  display_scheme: '12-6-3-3',
                  codeNames: {
                     '': 'Избери азбуку...',
                     ру: 'Пореформенная русская азбука',
                     рп: 'Дореформенная русская азбука',
                     цс: 'Церковнославянская кириллица',
                     цр: 'Церковнославянская разметка (hip)',
                     сс: 'Старославянкая кириллица',
                     ук: 'Украинская азбука',
                     ср: 'Сербская азбука (кириллица)',
                     хр: 'Хорватская азубка (латиница)',
                     со: 'Словнеская азбука',
                     бг: 'Болгарская азбука',
                     чх: 'Чешская азбука',
                     сл: 'Словацкая азбука',
                     по: 'Польская азбука',
                     ар: 'Армянская азбука',
                     ив: 'Грузинская азбука',
                     рм: 'Румынская латиница',
                     цу: 'Церковнославянская кириллица румынского извода',
                     гр: 'Греческая азбука',
                     ла: 'Латынь',
                     ит: 'Итальянская азбука',
                     фр: 'Французская азбука',
                     ис: 'Испанская азбука',
                     не: 'Немецкая азбука',
                     ир: 'Ирландская азбука',
                     си: 'Староирландская азбука',
                     ан: 'Английская азбука',
                     са: 'Среднеанглийская азбука',
                     ра: 'Раннеанглийская азбука',
                     ев: 'Еврейская азбука',
                  },
                  validations: {
                     'Азбука из списка должен быть выбран': matchEmptyObject,
                  }
               },
            }
         },
         descriptions: {
            kind: 'collection',
            title: "Описания",
            action: "Добавь описание",
            display_scheme: '12-12-12-12',
            validations: {
               'Языки в описаниях не могут совпадать': matchLanguages,
               'Азбуки в описаниях не могут совпадать': matchAlphabeths,

            },
            meta: {
               id: {
                  kind: 'hidden',
               },
               text: {
                  kind: 'text',
                  title: 'Имя',
                  placeholder: 'Введи имя',
                  display_scheme: '12-12-6-6',
                  validations: {
                  name: 'text',
                     'Текст имени отсутствует': matchEmptyObject,
                     'Набранный текст содержит знаки вне перечня избранной азбуки': matchLetters,
                  }
               },
               language_code: {
                  kind: 'select',
                  name: 'language_code',
                  title: 'Язык',
                  display_scheme: '12-6-3-3',
                  codeNames: {
                     '': 'Избери язык...',
                     ру: 'Русский',
                     цс: 'Церковнославянский',
                     сс: 'Старославянский',
                     ук: 'Украинский',
                     бл: 'Белорусский',
                     мк: 'Македонский',
                     сх: 'Сербохорватский',
                     со: 'Словенский',
                     бг: 'Болгарский',
                     чх: 'Чешский',
                     сл: 'Словацкий',
                     по: 'Польский',
                     кш: 'Кашубский',
                     вл: 'Верхнелужийкий',
                     нл: 'Нижнелужицкий',
                     ар: 'Армянский',
                     ив: 'Грузинский',
                     рм: 'Румынский',
                     гр: 'Греческий',
                     ла: 'Латинский',
                     ит: 'Итальянский',
                     фр: 'Французский',
                     ис: 'Испанский',
                     не: 'Немецкий',
                     ир: 'Ирландский',
                     си: 'Староирландский',
                     ан: 'Английский',
                     ев: 'Иврит',
                  },
                  validations: {
                     'Избранный язык не соотвествует избранной азбуке': matchCodes,
                     'Язык из списка должен быть выбран': matchEmptyObject,
                  }
               },
               alphabeth_code: {
                  kind: 'select',
                  name: 'alphabeth_code',
                  title: 'Азбука',
                  display_scheme: '12-6-3-3',
                  codeNames: {
                     '': 'Избери азбуку...',
                     ру: 'Пореформенная русская азбука',
                     рп: 'Дореформенная русская азбука',
                     цс: 'Церковнославянская кириллица',
                     цр: 'Церковнославянская разметка (hip)',
                     сс: 'Старославянкая кириллица',
                     ук: 'Украинская азбука',
                     ср: 'Сербская азбука (кириллица)',
                     хр: 'Хорватская азубка (латиница)',
                     со: 'Словнеская азбука',
                     бг: 'Болгарская азбука',
                     чх: 'Чешская азбука',
                     сл: 'Словацкая азбука',
                     по: 'Польская азбука',
                     ар: 'Армянская азбука',
                     ив: 'Грузинская азбука',
                     рм: 'Румынская латиница',
                     цу: 'Церковнославянская кириллица румынского извода',
                     гр: 'Греческая азбука',
                     ла: 'Латынь',
                     ит: 'Итальянская азбука',
                     фр: 'Французская азбука',
                     ис: 'Испанская азбука',
                     не: 'Немецкая азбука',
                     ир: 'Ирландская азбука',
                     си: 'Староирландская азбука',
                     ан: 'Английская азбука',
                     са: 'Среднеанглийская азбука',
                     ра: 'Раннеанглийская азбука',
                     ев: 'Еврейская азбука',
                  },
                  validations: {
                     'Азбука из списка должен быть выбран': matchEmptyObject,
                  }
               },
            }
         },
         wikies: {
            kind: 'collection',
            title: "Вики-ссылки",
            action: "Добавь вики-ссылку",
            display_scheme: '12-12-12-12',
            validations: {
               'Языки в описаниях не могут совпадать': matchLanguages,
               'Азбуки в описаниях не могут совпадать': matchAlphabeths,

            },
            meta: {
               id: {
                  kind: 'hidden',
               },
               text: {
                  kind: 'text',
                  title: 'Имя',
                  placeholder: 'Введи имя',
                  name: 'text',
                  display_scheme: '12-12-6-6',
                  validations: {
                     'Текст имени отсутствует': matchEmptyObject,
                     'Набранный текст содержит знаки вне перечня избранной азбуки': matchLetters,
                  }
               },
               language_code: {
                  kind: 'select',
                  name: 'language_code',
                  title: 'Язык',
                  display_scheme: '12-6-3-3',
                  codeNames: {
                     '': 'Избери язык...',
                     ру: 'Русский',
                     цс: 'Церковнославянский',
                     сс: 'Старославянский',
                     ук: 'Украинский',
                     бл: 'Белорусский',
                     мк: 'Македонский',
                     сх: 'Сербохорватский',
                     со: 'Словенский',
                     бг: 'Болгарский',
                     чх: 'Чешский',
                     сл: 'Словацкий',
                     по: 'Польский',
                     кш: 'Кашубский',
                     вл: 'Верхнелужийкий',
                     нл: 'Нижнелужицкий',
                     ар: 'Армянский',
                     ив: 'Грузинский',
                     рм: 'Румынский',
                     гр: 'Греческий',
                     ла: 'Латинский',
                     ит: 'Итальянский',
                     фр: 'Французский',
                     ис: 'Испанский',
                     не: 'Немецкий',
                     ир: 'Ирландский',
                     си: 'Староирландский',
                     ан: 'Английский',
                     ев: 'Иврит',
                  },
                  validations: {
                     'Избранный язык не соотвествует избранной азбуке': matchCodes,
                     'Язык из списка должен быть выбран': matchEmptyObject,
                  }
               },
               alphabeth_code: {
                  kind: 'select',
                  name: 'alphabeth_code',
                  title: 'Азбука',
                  display_scheme: '12-6-3-3',
                  codeNames: {
                     '': 'Избери азбуку...',
                     ру: 'Пореформенная русская азбука',
                     рп: 'Дореформенная русская азбука',
                     цс: 'Церковнославянская кириллица',
                     цр: 'Церковнославянская разметка (hip)',
                     сс: 'Старославянкая кириллица',
                     ук: 'Украинская азбука',
                     ср: 'Сербская азбука (кириллица)',
                     хр: 'Хорватская азубка (латиница)',
                     со: 'Словнеская азбука',
                     бг: 'Болгарская азбука',
                     чх: 'Чешская азбука',
                     сл: 'Словацкая азбука',
                     по: 'Польская азбука',
                     ар: 'Армянская азбука',
                     ив: 'Грузинская азбука',
                     рм: 'Румынская латиница',
                     цу: 'Церковнославянская кириллица румынского извода',
                     гр: 'Греческая азбука',
                     ла: 'Латынь',
                     ит: 'Итальянская азбука',
                     фр: 'Французская азбука',
                     ис: 'Испанская азбука',
                     не: 'Немецкая азбука',
                     ир: 'Ирландская азбука',
                     си: 'Староирландская азбука',
                     ан: 'Английская азбука',
                     са: 'Среднеанглийская азбука',
                     ра: 'Раннеанглийская азбука',
                     ев: 'Еврейская азбука',
                  },
                  validations: {
                     'Азбука из списка должен быть выбран': matchEmptyObject,
                  }
               },
            }
         },
         links: {
            kind: 'collection',
            title: "Ссылки",
            action: "Добавь ссылку",
            display_scheme: '12-12-12-12',
            validations: {
               'Языки в описаниях не могут совпадать': matchLanguages,
               'Азбуки в описаниях не могут совпадать': matchAlphabeths,

            },
            meta: {
               id: {
                  kind: 'hidden',
               },
               text: {
                  kind: 'text',
                  title: 'Имя',
                  placeholder: 'Введи имя',
                  name: 'text',
                  display_scheme: '12-12-6-6',
                  validations: {
                     'Текст имени отсутствует': matchEmptyObject,
                     'Набранный текст содержит знаки вне перечня избранной азбуки': matchLetters,
                  }
               },
               language_code: {
                  kind: 'select',
                  name: 'language_code',
                  title: 'Язык',
                  display_scheme: '12-6-3-3',
                  codeNames: {
                     '': 'Избери язык...',
                     ру: 'Русский',
                     цс: 'Церковнославянский',
                     сс: 'Старославянский',
                     ук: 'Украинский',
                     бл: 'Белорусский',
                     мк: 'Македонский',
                     сх: 'Сербохорватский',
                     со: 'Словенский',
                     бг: 'Болгарский',
                     чх: 'Чешский',
                     сл: 'Словацкий',
                     по: 'Польский',
                     кш: 'Кашубский',
                     вл: 'Верхнелужийкий',
                     нл: 'Нижнелужицкий',
                     ар: 'Армянский',
                     ив: 'Грузинский',
                     рм: 'Румынский',
                     гр: 'Греческий',
                     ла: 'Латинский',
                     ит: 'Итальянский',
                     фр: 'Французский',
                     ис: 'Испанский',
                     не: 'Немецкий',
                     ир: 'Ирландский',
                     си: 'Староирландский',
                     ан: 'Английский',
                     ев: 'Иврит',
                  },
                  validations: {
                     'Избранный язык не соотвествует избранной азбуке': matchCodes,
                     'Язык из списка должен быть выбран': matchEmptyObject,
                  }
               },
               alphabeth_code: {
                  kind: 'select',
                  name: 'alphabeth_code',
                  title: 'Азбука',
                  display_scheme: '12-6-3-3',
                  codeNames: {
                     '': 'Избери азбуку...',
                     ру: 'Пореформенная русская азбука',
                     рп: 'Дореформенная русская азбука',
                     цс: 'Церковнославянская кириллица',
                     цр: 'Церковнославянская разметка (hip)',
                     сс: 'Старославянкая кириллица',
                     ук: 'Украинская азбука',
                     ср: 'Сербская азбука (кириллица)',
                     хр: 'Хорватская азубка (латиница)',
                     со: 'Словнеская азбука',
                     бг: 'Болгарская азбука',
                     чх: 'Чешская азбука',
                     сл: 'Словацкая азбука',
                     по: 'Польская азбука',
                     ар: 'Армянская азбука',
                     ив: 'Грузинская азбука',
                     рм: 'Румынская латиница',
                     цу: 'Церковнославянская кириллица румынского извода',
                     гр: 'Греческая азбука',
                     ла: 'Латынь',
                     ит: 'Итальянская азбука',
                     фр: 'Французская азбука',
                     ис: 'Испанская азбука',
                     не: 'Немецкая азбука',
                     ир: 'Ирландская азбука',
                     си: 'Староирландская азбука',
                     ан: 'Английская азбука',
                     са: 'Среднеанглийская азбука',
                     ра: 'Раннеанглийская азбука',
                     ев: 'Еврейская азбука',
                  },
                  validations: {
                     'Азбука из списка должен быть выбран': matchEmptyObject,
                  }
               },
            }
         },
         author_name: {
            kind: 'text',
            name: 'author_name',
            title: 'Автор',
            display_scheme: '12-4-6-6',
            placeholder: 'Введи имя автора(ов)',
         },
         date: {
            kind: 'text',
            name: 'date',
            title: 'Пора',
            display_scheme: '12-4-3-3',
            placeholder: 'Введи пору написания',
         },
         council: {
            kind: 'text',
            name: 'council',
            title: 'Собор',
            display_scheme: '12-4-3-3',
            placeholder: 'Введи сокращение собора',
         },
      }
   }

   static propTypes = {
      id: PropTypes.number,
      slug: PropTypes.object,
      licit: PropTypes.bool,
      language_code: PropTypes.string,
      alphabeth_code: PropTypes.string,
      author_name: PropTypes.string,
      date: PropTypes.string,
      council: PropTypes.string,
      names: PropTypes.array,
      wikies: PropTypes.array,
      descriptions: PropTypes.array,
      links: PropTypes.array,
   }

   static getCleanState() {
      return {
         id: null,
         licit: false,
         slug: {text: ''},
         language_code: '',
         alphabeth_code: '',
         author_name: '',
         date: '',
         council: '',
         names: [],
         descriptions: [],
         wikies: [],
         links: [],
      }
   }
}
